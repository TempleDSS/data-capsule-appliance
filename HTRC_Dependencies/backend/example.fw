# Generated by iptables-save v1.4.12 on Mon Feb  3 12:23:44 2014

#Give access to DHCP server
*mangle
-A POSTROUTING -o br1 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill
COMMIT

#*nat
#:POSTROUTING - [0:0]
#:INPUT - [0:0]
#:OUTPUT - [0:0]
#:PREROUTING - [0:0]
#COMMIT
# Completed on Mon Feb  3 12:23:44 2014
# Generated by iptables-save v1.4.12 on Mon Feb  3 12:23:44 2014
*filter
#:INPUT - [0:0]
#:FORWARD - [0:0]
#:OUTPUT - [0:0]

#Give access to babel.hathitrust.org, catalog.hathitrust.org and hathitrust.org in the secure mode
-A FORWARD -p tcp -d 141.213.128.167 --dport 443 -j ACCEPT
-A OUTPUT  -p tcp -d 141.213.128.167 --dport 443 -j ACCEPT
-A FORWARD -p tcp -d 141.213.128.167 --dport 80 -j ACCEPT
-A OUTPUT  -p tcp -d 141.213.128.167 --dport 80 -j ACCEPT
-A FORWARD -p tcp -d 134.68.125.203 --dport 443 -j ACCEPT
-A OUTPUT  -p tcp -d 134.68.125.203 --dport 443 -j ACCEPT
-A FORWARD -p tcp -d 134.68.125.203 --dport 80 -j ACCEPT
-A OUTPUT  -p tcp -d 134.68.125.203 --dport 80 -j ACCEPT

# silvermaple.pti.indiana.edu - For Data API port 25443
-A INPUT   -p tcp -d 156.56.27.70 --dport 25443 -j ACCEPT
-A FORWARD -p tcp -d 156.56.27.70 --dport 25443 -j ACCEPT
-A OUTPUT  -p tcp -d 156.56.27.70 --dport 25443 -j ACCEPT
-A INPUT   -p tcp -s 156.56.27.70 --sport 25443 -j ACCEPT
-A FORWARD -p tcp -s 156.56.27.70 --sport 25443 -j ACCEPT
-A OUTPUT  -p tcp -s 156.56.27.70 --sport 25443 -j ACCEPT

# silvermaple.pti.indiana.edu -	  For Identity Server port 443
-A INPUT   -p tcp -d 156.56.27.70 --dport 443 -j ACCEPT
-A FORWARD -p tcp -d 156.56.27.70 --dport 443 -j ACCEPT
-A OUTPUT  -p tcp -d 156.56.27.70 --dport 443 -j ACCEPT
-A INPUT   -p tcp -s 156.56.27.70 --sport 443 -j ACCEPT
-A FORWARD -p tcp -s 156.56.27.70 --sport 443 -j ACCEPT
-A OUTPUT  -p tcp -s 156.56.27.70 --sport 443 -j ACCEPT

# chinkapin - for solr proxy
-A INPUT   -p tcp -d 156.56.27.77 --dport 9994 -j ACCEPT
-A FORWARD -p tcp -d 156.56.27.77 --dport 9994 -j ACCEPT
-A OUTPUT  -p tcp -d 156.56.27.77 --dport 9994 -j ACCEPT
-A INPUT   -p tcp -s 156.56.27.77 --sport 9994 -j ACCEPT
-A FORWARD -p tcp -s 156.56.27.77 --sport 9994 -j ACCEPT
-A OUTPUT  -p tcp -s 156.56.27.77 --sport 9994 -j ACCEPT

# htrc2 - for production portal
-A INPUT   -p tcp -d 156.56.27.83 --dport 443 -j ACCEPT
-A FORWARD -p tcp -d 156.56.27.83 --dport 443 -j ACCEPT
-A OUTPUT  -p tcp -d 156.56.27.83 --dport 443 -j ACCEPT
-A INPUT   -p tcp -s 156.56.27.83 --sport 443 -j ACCEPT
-A FORWARD -p tcp -s 156.56.27.83 --sport 443 -j ACCEPT
-A OUTPUT  -p tcp -s 156.56.27.83 --sport 443 -j ACCEPT
-A INPUT   -p tcp -d 156.56.27.83 --dport 80 -j ACCEPT
-A FORWARD -p tcp -d 156.56.27.83 --dport 80 -j ACCEPT
-A OUTPUT  -p tcp -d 156.56.27.83 --dport 80 -j ACCEPT
-A INPUT   -p tcp -s 156.56.27.83 --sport 80 -j ACCEPT
-A FORWARD -p tcp -s 156.56.27.83 --sport 80 -j ACCEPT
-A OUTPUT  -p tcp -s 156.56.27.83 --sport 80 -j ACCEPT

#Give access to	  DHCP server
-A INPUT -i br1 -p udp -m udp -m multiport --dports 53,67 -j ACCEPT
-A INPUT -i br1 -p tcp -m tcp -m multiport --dports 53,67 -j ACCEPT

-A INPUT -j DROP
-A FORWARD -j DROP
-A OUTPUT -j DROP

COMMIT
# Completed on Mon Feb  3 12:23:44 2014
# Updated on Tue April 4 2017 by Samitha Liyanage